---
title: Git jest git
author: Michał Bojanowski
output:
  html_document:
    toc: true
    self_contained: true
---

```{r, check_commands, results="hide", echo=FALSE}
# check if necessary commands are present
cmd <- c("bash", "sh", "git")
r <- sapply(cmd, Sys.which)
empty <- r == ""
if( any(empty) ) 
  stop(paste("some commands are not available: ", paste(cmd[empty], collapse=", ")))

library(knitr) # dev version
pr <- function(user=NULL) {
  paste0("PS4=", sQuote('$(pwd | sed s/^.*gitjestgit/./)\\$ ')
}
opts_chunk$set(engine="bash", comment="", engine.env=e, echo=FALSE,
               comment=NA, engine.opts="-x")
```




# Wstęp

Praca z git bash.

## Narzędzia

- Zainstalować `git`. (git bash)
- Przydatne aliasy (skróty) dla `git`
  - oglądanie historii

## Źródła

- Książka o gicie



# Repozytorium

Symulacja githuba.

Główne repozytorium projektu

```{r, create_projekt_bare}
git init --bare projekt.git
git clone projekt.git
cd projekt
echo "To jest pierwszy plik" >> plik1.txt
echo "To jest drugi plik" >> plik2.txt
git add plik1.txt plik2.txt
git commit -m "Pierwsze wersje plików"
echo "Gadery poluki" > plik1.txt
git commit -am "Dopiski"
echo "Siała baba mak" > plik2.txt
git commit -am "Dopiski o sianiu w drugim pliku"
git push origin master
cd ..
rm -rf projekt
```





# Praca w pojedynke

Klonujemy za pomocą URL ze strony github.

```
git clone projekt.git
# Przy pracy z Github  `projekt.git` wstawiamy odpowiedni URL.
# Powstanie folder `projekt` zawierający następujące pliki:
cd projekt
ls projekt

# 1. edytujemy i zapisujemy
echo "Moja edycja" >> plik1.txt

# 2. komitujemy
git add plik1.txt
git commit -m "Zmieniłem plik1.txt"

# 3. wróc do 1., i tak dalej...
```

Dobre praktyki komitowania:

- Lepiej częściej niż rzadziej.
- Jeżeli to możliwe, i ma sens, komit powinien być jakąś logiczną całością.
- ...

W odpowiednim momencie (gdy zmiany mają być widoczne dla innych, na koniec dnia, etc.)
wypychamy ("push") nasze zmiany z lokalnego repozytorium "upstream", czyli do repozytorium,
które sklonowaliśmy. W tym przypadku `projekt.git`.

```
git push origin
```



# Zespołowo: fork & pull request

Zespół sklada się z:

- Aldona
- Barbara
- 

Robimy forka na githubie. Tutaj nazywa się `fork.git`.

```{r, fake_fork}
git init --bare fork.git
git clone projekt.git
cd projekt
git remote add fork ../fork.git
git push fork master
cd ..
rm -rf projekt
```

Klonujemy forka. robimy brancha i pracujemy na nim.


```{r}
git clone fork.git
cd fork
git checkout -b mojezmiany
echo "zmiana1" >> plik1.txt
git add plik1.txt
git commit -m "zmiana1"
echo "zmiana2" >> plik2.txt
git add plik2.txt
git commit -m "zmiana2"

#
git log --no-color --oneline --graph
```

W między czasie współpracownik pracował na masterze.

```{r}





